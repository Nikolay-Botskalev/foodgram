[![Main Foodgram Workflow](https://github.com/Nikolay-Botskalev/foodgram/actions/workflows/main.yml/badge.svg)](https://github.com/Nikolay-Botskalev/foodgram/actions/workflows/main.yml)


#  Foodgram

## Описание проекта

Проект Foodgram представляет собой платформу, предназначенную для обмена кулинарными рецептами. После регистрации пользователям домтупна форма для размещения свои рецептов с описанием, ингредиентами и фотографией. Также пользователи могут добавлять в избранное понравившиеся рецепты других пользоватлеей, оформлять подписки на других пользоватлей, а так же формировать список ингредиентов для выбранных рецептов. Каждым рецептом можно поделиться(сформировать ссылку). Просматривать и делиться рецептами можно и без регистрации на платформе.

## Основные функции

*   **Регистрация и авторизация пользователей:** Для публикации рецептов, формирования списка покупок, оформления подписок необходимо зерегистрироваться и авторизоваться. Функции просмотра доступны всем пользваотелям.
*   **Добавление аватара:** Авторизованный пользователь может добавить для своего профиля аватар.
*   **Создание/обновление рецепта:** Авторизованный пользователь может создать/обновить свой рецепт. Рецепт должен в себя включать: Название блюда, тег(-и), список ингредиентов с количеством, время приготовление, описание с фотографией.
*   **Просмотр профилей других пользователей:** Пользователи могут просматривать профиль других пользователей. Так же можно подписаться на профиль пользователя.
*   **Список избранного:** Понравившиеся рецепты можно добавить в избранное. Список избранного доступен по отдельному запросу.
*   **Формирование списка покупок:** Авторизованный пользователь может добвлять рецепты в список покупок. Список покупок скачивается отдельным запросом в текстовом формате.
*   **API:** Настроен API для доступа к данным и интеграции с другими приложениями
Спецификация API доступна после запуска проекта по адресу: http://localhost/api/docs/

## Стек использованных технологий

*   **Python:**
*   **Django:** 
*   **PostgreSQL:**
*   **HTML, CSS, JS:**
*   **GitHub Actions:**

## Локальный запуск проекта

1. Клонирование репозитория
    В рабочей папке выполнить команду:
    ```
    git_clone https://github.com/Nikolay-Botskalev/foodgram
    ```

2. Создание виртуального окружения
    ```
    python -m venv venv
    ```

3. Активация виартуального окружения
    ```
    source venv/scripts/activate
    ```

4. Установка зависимостей
    ```
    pip install -r requirements.txt
    ```

5. Выполнение миграций
  - Перейти в директорию с файлом manage.py:
    ```
    cd backend
    ```
  - Выполнить команду:
    ```
    python manage.py migrate
    ```

6. Запуск сервера
    ```
    python manage.py runserver
    ```

## Запуск в контейнерах

1. Запуск файла
    В директории с файлом docker-compose.production.yml(по умолчанию в корневой директории) выполнить команду:
    ```
    docker compose -f docker-compose.production.yml up
    ```
    Для запуска проекта в фоновом режиме добавить в конец команды ключ '-d'. Изображения для контейнеров скачаются из Docker Hub.

2. Проверка запущенных контейнеров
    Для проверки запуска контейнеров в консоли выполнить команду:
    ```
    docker compose -f docker-compose.production.yml ps
    ```

3. Применение миграций
    Для применения миграций выполнить команду:
    ```
    docker compose -f docker-compose.production.yml exec backend python manage.py migrate
    ```

4. Сборка статики
    Для сборки статики выполнить команды:
    ```
    docker compose -f docker-compose.production.yml exec backend python manage.py collectstatic
    docker compose -f docker-compose.production.yml exec backend cp -r /app/collected_static/. /backend_static/static/ 
    ```

5. Остановка и удаление контейнеров
    Для остановки контейнеров выполнить команду:
    ```
    docker compose -f docker-compose.production.yml stop
    ```
    Для остановки и удаления контейнеров выпонить команду:
    ```
    docker compose -f docker-compose.production.yml down
    ```

## Заполнение .env

1.  **Создайте файл `.env` в корне проекта.** 
2.  **Заполните `.env` по следующему шаблону:**
    ```env
    POSTGRES_USER = <имя пользователя БД>
    POSTGRES_PASSWORD = <пароль пользователя БД>
    POSTGRES_DB = <название БД>
    DB_PORT = <порт>
    SECRET_KEY = <секретный ключ>
    ALLOWED_HOSTS=<список_разрешенных_хостов> # Разделите запятыми с пробелом
    DEBUG = <True/False>
    PRODUCTION = <True/False> # Для локальной отладки - False
    ```

## Автор
    https://github.com/Nikolay-Botskalev
